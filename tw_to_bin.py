#a fixed point conversion for twiddle factor from decimal to binary with 7-bit integer and 10/15/30-bit decimal

#Twiddle factor is 17-bit, 7-bit for integer and 10-bit for decimal.
#The maximum integer is 81 (7-bit), so the integer is 7-bit.
#The fraction algorithm is, the fraction part multiple by 2^10 (10-bit),
#keep the integer part of the product and translate it to binary.

'''TW = [0.0]*255
TW[0] = 0.5000094125358878
TW[1] = 0.500084723455784
TW[2] = 0.5002354020255269
TW[3] = 0.5004615618093246
TW[4] = 0.5007633734146156
TW[5] = 0.5011410648064231
TW[6] = 0.5015949217281668
TW[7] = 0.502125288230386
TW[8] = 0.5027325673091954
TW[9] = 0.5034172216566842
TW[10] = 0.5041797745258774
TW[11] = 0.5050208107132756
TW[12] = 0.5059409776624396
TW[13] = 0.5069409866925212
TW[14] = 0.5080216143561264
TW[15] = 0.509183703931388
TW[16] = 0.5104281670536573
TW[17] = 0.5117559854927805
TW[18] = 0.5131682130825206
TW[19] = 0.5146659778093218
TW[20] = 0.516250484068288
TW[21] = 0.5179230150949777
TW[22] = 0.5196849355823947
TW[23] = 0.5215376944933958
TW[24] = 0.5234828280796439
TW[25] = 0.52552196311921
TW[26] = 0.5276568203859896
TW[27] = 0.5298892183652453
TW[28] = 0.5322210772308335
TW[29] = 0.5346544231010253
TW[30] = 0.537191392591309
TW[31] = 0.5398342376841637
TW[32] = 0.5425853309375497
TW[33] = 0.545447171055775
TW[34] = 0.5484223888484947
TW[35] = 0.551513753605893
TW[36] = 0.554724179920619
TW[37] = 0.5580567349898085
TW[38] = 0.5615146464335654
TW[39] = 0.5651013106696203
TW[40] = 0.5688203018875696
TW[41] = 0.5726753816701664
TW[42] = 0.5766705093136241
TW[43] = 0.5808098529038624
TW[44] = 0.5850978012111273
TW[45] = 0.58953897647151
TW[46] = 0.5941382481306648
TW[47] = 0.5989007476325463
TW[48] = 0.6038318843443582
TW[49] = 0.6089373627182432
TW[50] = 0.614223200800649
TW[51] = 0.6196957502119484
TW[52] = 0.6253617177319102
TW[53] = 0.6312281886412079
TW[54] = 0.6373026519855411
TW[55] = 0.6435930279473415
TW[56] = 0.6501076975307724
TW[57] = 0.6568555347890955
TW[58] = 0.6638459418498757
TW[59] = 0.6710888870233562
TW[60] = 0.6785949463131795
TW[61] = 0.6863753486870501
TW[62] = 0.6944420255086364
TW[63] = 0.7028076645818034
TW[64] = 0.7114857693151208
TW[65] = 0.7204907235796304
TW[66] = 0.7298378629074134
TW[67] = 0.7395435527641373
TW[68] = 0.749625274727372
TW[69] = 0.7601017215162176
TW[70] = 0.7709929019493761
TW[71] = 0.7823202570613161
TW[72] = 0.7941067887834509
TW[73] = 0.8063772028037925
TW[74] = 0.8191580674598145
TW[75] = 0.83247799080191
TW[76] = 0.8463678182968619
TW[77] = 0.860860854031955
TW[78] = 0.8759931087426972
TW[79] = 0.8918035785352535
TW[80] = 0.9083345588266809
TW[81] = 0.9256319988042384
TW[82] = 0.9437459026371479
TW[83] = 0.962730784794803
TW[84] = 0.9826461881778968
TW[85] = 1.0035572754078206
TW[86] = 1.0255355056139732
TW[87] = 1.048659411496106
TW[88] = 1.0730154944316674
TW[89] = 1.0986992590905857
TW[90] = 1.1258164135986009
TW[91] = 1.1544842669978943
TW[92] = 1.184833362908442
TW[93] = 1.217009397314603
TW[94] = 1.2511754798461228
TW[95] = 1.287514812536712
TW[96] = 1.326233878832723
TW[97] = 1.3675662599582539
TW[98] = 1.411777227500661
TW[99] = 1.459169302866857
TW[100] = 1.5100890297227016
TW[101] = 1.5649352798258847
TW[102] = 1.6241695131835794
TW[103] = 1.6883285509131505
TW[104] = 1.7580406092704062
TW[105] = 1.8340456094306077
TW[106] = 1.9172211551275689
TW[107] = 2.0086161135167564
TW[108] = 2.1094945286246385
TW[109] = 2.22139377701127
TW[110] = 2.346202662531156
TW[111] = 2.486267909203593
TW[112] = 2.644541877144861
TW[113] = 2.824791402350551
TW[114] = 3.0318994541759925
TW[115] = 3.2723115884254845
TW[116] = 3.5547153325075804
TW[117] = 3.891107790700307
TW[118] = 4.298537526449054
TW[119] = 4.802076008665048
TW[120] = 5.440166215091329
TW[121] = 6.274908408039339
TW[122] = 7.413566756422303
TW[123] = 9.058751453879703
TW[124] = 11.644627325175037
TW[125] = 16.300023088031555
TW[126] = 27.163977662448232
TW[127] = 81.48784219222516
TW[128] = 0.5000376519155477
TW[129] = 0.5003390374428216
TW[130] = 0.5009427176380873
TW[131] = 0.5018505174842379
TW[132] = 0.5030651913013697
TW[133] = 0.5045904432216454
TW[134] = 0.5064309549285542
TW[135] = 0.5085924210498143
TW[136] = 0.5110815927066812
TW[137] = 0.5139063298475396
TW[138] = 0.5170756631334912
TW[139] = 0.5205998663018917
TW[140] = 0.524490540114724
TW[141] = 0.5287607092074876
TW[142] = 0.5334249333971333
TW[143] = 0.538499435291984
TW[144] = 0.5440022463817783
TW[145] = 0.549953374183236
TW[146] = 0.5563749934898856
TW[147] = 0.5632916653417023
TW[148] = 0.5707305880121454
TW[149] = 0.5787218851348208
TW[150] = 0.5872989370937893
TW[151] = 0.5964987630244563
TW[152] = 0.606362462272146
TW[153] = 0.6169357260050706
TW[154] = 0.6282694319707711
TW[155] = 0.6404203382416639
TW[156] = 0.6534518953751283
TW[157] = 0.6674352009263413
TW[158] = 0.6824501259764195
TW[159] = 0.6985866506472291
TW[160] = 0.7159464549705746
TW[161] = 0.7346448236478627
TW[162] = 0.7548129391165311
TW[163] = 0.776600658233963
TW[164] = 0.8001798956216941
TW[165] = 0.8257487738627852
TW[166] = 0.8535367510066064
TW[167] = 0.8838110045596234
TW[168] = 0.9168844461846523
TW[169] = 0.9531258743921193
TW[170] = 0.9929729612675466
TW[171] = 1.036949040910389
TW[172] = 1.0856850642580145
TW[173] = 1.1399486751015042
TW[174] = 1.2006832557294167
TW[175] = 1.2690611716991191
TW[176] = 1.346557628206286
TW[177] = 1.4350550884414341
TW[178] = 1.5369941008524954
TW[179] = 1.6555965242641195
TW[180] = 1.7952052190778898
TW[181] = 1.961817848571166
TW[182] = 2.163957818751979
TW[183] = 2.4141600002500763
TW[184] = 2.7316450287739396
TW[185] = 3.147462191781909
TW[186] = 3.7152427383269746
TW[187] = 4.5362909369693565
TW[188] = 5.827688377844654
TW[189] = 8.153848602466814
TW[190] = 13.58429025728446
TW[191] = 40.744688103351834
TW[192] = 0.500150636020651
TW[193] = 0.5013584524464084
TW[194] = 0.5037887256810443
TW[195] = 0.5074711720725553
TW[196] = 0.5124514794082247
TW[197] = 0.5187927131053328
TW[198] = 0.52657731515427
TW[199] = 0.535909816907992
TW[200] = 0.5469204379855088
TW[201] = 0.5597698129470802
TW[202] = 0.57465518403266
TW[203] = 0.5918185358574165
TW[204] = 0.6115573478825099
TW[205] = 0.6342389366884031
TW[206] = 0.6603198078137061
TW[207] = 0.6903721282002123
TW[208] = 0.7251205223771985
TW[209] = 0.7654941649730891
TW[210] = 0.8127020908144905
TW[211] = 0.8683447152233481
TW[212] = 0.9345835970364075
TW[213] = 1.0144082649970547
TW[214] = 1.1120716205797176
TW[215] = 1.233832737976571
TW[216] = 1.3892939586328277
TW[217] = 1.5939722833856311
TW[218] = 1.8746759800084078
TW[219] = 2.282050068005162
TW[220] = 2.924628428158216
TW[221] = 4.084611078129248
TW[222] = 6.796750711673633
TW[223] = 20.373878167231453
TW[224] = 0.5006029982351963
TW[225] = 0.5054709598975436
TW[226] = 0.5154473099226246
TW[227] = 0.5310425910897841
TW[228] = 0.5531038960344445
TW[229] = 0.5829349682061339
TW[230] = 0.6225041230356648
TW[231] = 0.6748083414550057
TW[232] = 0.7445362710022986
TW[233] = 0.8393496454155268
TW[234] = 0.9725682378619608
TW[235] = 1.1694399334328847
TW[236] = 1.4841646163141662
TW[237] = 2.057781009953411
TW[238] = 3.407608418468719
TW[239] = 10.190008123548033
TW[240] = 0.5024192861881557
TW[241] = 0.5224986149396889
TW[242] = 0.5669440348163577
TW[243] = 0.6468217833599901
TW[244] = 0.7881546234512502
TW[245] = 1.060677685990347
TW[246] = 1.7224470982383342
TW[247] = 5.101148618689155
TW[248] = 0.5097955791041592
TW[249] = 0.6013448869350453
TW[250] = 0.8999762231364156
TW[251] = 2.5629154477415055
TW[252] = 0.541196100146197
TW[253] = 1.3065629648763764
TW[254] = 0.7071067811865475'''


import math

#print twiddle factor
TW = [0.0]*255
x = 0
for a in range(8):
	if (a==0):
		n = 256
	else:
		n = int(256/(2**a))
	half = int(n/2)
	for i in range(half):
		TW[x]=1.0/(math.cos((i + 0.5) * math.pi / n) * 2.0)
		#print("TW{0}_{1}={2:10.6f};".format(i,n,TW[x]))
		x = x + 1

#convert to binary
TW_int = [0]*255
TW_dec = [0.0]*255
for i in range(255):
    TW_int[i] = int(TW[i])
    TW_dec[i] = int(round((TW[i] - int(TW[i]))*(2**15),0))
    print("{0}: tw = 22'b{1:7b}{2:0>15b};".format(i, TW_int[i], TW_dec[i]))


'''TW_int = [0]*255
TW_fra = [0.0]*255
TW_fra2 = [0.0]*255

for i in range(255):
    TW_int[i] = int(TW[i])
    TW_fra[i] = TW[i] - int(TW[i])

for i in range(255):
    #TW_fra2[i] = int(round(TW_fra[i]*(2**10),0))   #10-bit fraction number
    #TW_fra2[i] = int(round(TW_fra[i]*(2**30),0))   #30-bit fraction number
    TW_fra2[i] = int(round(TW_fra[i]*(2**15),0))   #15-bit fraction number

for i in range(255):
    #print("\t\t\t\t{0}: tw = 17'b{1:7b}{2:0>10b};".format(i, TW_int[i], TW_fra2[i]))
    #print("\t\t\t\t{0}: tw = 37'b{1:7b}{2:0>30b};".format(i-128-64-32-16, TW_int[i], TW_fra2[i]))
    print("\t\t\t\t{0}: tw = 22'b{1:7b}{2:0>15b};".format(i-128-64-32-16, TW_int[i], TW_fra2[i]))'''

